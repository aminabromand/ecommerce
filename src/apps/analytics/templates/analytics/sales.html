{% extends 'base.html' %}

{% block content %}

<div class="row my-5">
	<div class="col">
		<h1>Sales Data</h1>
		<hr/>
	</div>
</div>

<div class="row my-5">
	<div class="col-4">
		<h2>Todays sales</h2>
		<hr/>

		<p>Orders Total: {{ today.recent_data.total__sum }} €</p>
		<ol>
			{% for order in today.recent|slice:":5" %}
				<li>
					{{ order.order_id }}
					{{ order.total }}
					{{ order.update }}
				</li>
			{% endfor %}
		</ol>

		<h2>This weeks sales</h2>
		<hr/>

		<p>Orders Total: {{ this_week.recent_data.total__sum }} €</p>
		<ol>
			{% for order in this_week.recent|slice:":5" %}
				<li>
					{{ order.order_id }}
					{{ order.total }}
					{{ order.update }}
				</li>
			{% endfor %}
		</ol>
	</div>
	
	<div class="col-8">
		<canvas id="myChart" width="400" height="400"></canvas>
	</div>


</div>


<div class="row my-5">
	<div class="col-12 mx-auto">
		<h2>This weeks sales</h2>
		<hr/>
	</div>
	<div class="col-4 mx-auto">
		<p>Orders Total: {{ this_week.recent_data.total__sum }} €</p>
		<ol>
			{% for order in this_week.recent|slice:":5" %}
				<li>
					{{ order.order_id }}
					{{ order.total }}
					{{ order.update }}
				</li>
			{% endfor %}
		</ol>
	</div>
	<div class="col-4 mx-auto">
		<p>Shipped Totals: {% if this_week.shipped_data.total__sum %}{{ this_week.shipped_data.total__sum }}{% endif %}</p>
		<ol>
			
			{% for order in this_week.shipped|slice:":5" %}
				<li>
					{{ order.order_id }}
					{{ order.total }}
					{{ order.update }}
				</li>	
			{% endfor %}
			
		</ol>
	</div>
	<div class="col-4 mx-auto">
		<p>Paid Totals: {{ this_week.paid_data.total__sum }}</p>
		<ol>
			{% for order in this_week.paid|slice:":5" %}
				<li>
					{{ order.order_id }}
					{{ order.total }}
					{{ order.update }}
				</li>
			{% endfor %}
		</ol>
	</div>
</div>

<div class="row my-5">
	<div class="col-12 mx-auto">
		<h2>Previous 4 weeks</h2>
		<hr/>
	</div>
	<div class="col-4 mx-auto">
		<p>Orders Total: {{ last_four_weeks.recent_data.total__sum }} €</p>
		<ol>
			{% for order in last_four_weeks.recent|slice:":5" %}
				<li>
					{{ order.order_id }}
					{{ order.total }}
					{{ order.update }}
				</li>
			{% endfor %}
		</ol>
	</div>
	<div class="col-4 mx-auto">
		<p>Shipped Totals: {% if last_four_weeks.shipped_data.total__sum %}{{ last_four_weeks.shipped_data.total__sum }}{% endif %}</p>
		<ol>
			
			{% for order in last_four_weeks.shipped|slice:":5" %}
				<li>
					{{ order.order_id }}
					{{ order.total }}
					{{ order.update }}
				</li>	
			{% endfor %}
			
		</ol>
	</div>
	<div class="col-4 mx-auto">
		<p>Paid Totals: {{ last_four_weeks.paid_data.total__sum }}</p>
		<ol>
			{% for order in last_four_weeks.paid|slice:":5" %}
				<li>
					{{ order.order_id }}
					{{ order.total }}
					{{ order.update }}
				</li>
			{% endfor %}
		</ol>
	</div>
</div>


{% endblock %}

{% block javascript %}
<script>
var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
        datasets: [{
            label: 'Sales per Day',
            data: [12, 19, 3, 5, 2, 3, 99],
			backgroundColor:'rgba(255, 99, 132, 0.2)',
        	borderColor: 'rgba(255,99,132,1)',
            // backgroundColor: [
            //     'rgba(255, 99, 132, 0.2)',
            //     'rgba(54, 162, 235, 0.2)',
            //     'rgba(255, 206, 86, 0.2)',
            //     'rgba(75, 192, 192, 0.2)',
            //     'rgba(153, 102, 255, 0.2)',
            //     'rgba(255, 159, 64, 0.2)',
            //     'rgba(255, 159, 64, 0.2)'
            // ],
            // borderColor: [
            //     'rgba(255,99,132,1)',
            //     'rgba(54, 162, 235, 1)',
            //     'rgba(255, 206, 86, 1)',
            //     'rgba(75, 192, 192, 1)',
            //     'rgba(153, 102, 255, 1)',
            //     'rgba(255, 159, 64, 1)',
            //     'rgba(255, 159, 64, 1)'
            // ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>
{% endblock %}